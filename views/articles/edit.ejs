<!-- *******************
     ** EDIT ARTICLES **
     ******************* -->


<%- include ('../partials/header.ejs') %>

<div id="main_container">

 	<div id="container_left">
		<div class="width_limiter_left">
		<!-- includes the side menu with news categories -->	   
		<%- include ('../partials/categories.ejs') %>
		</div>
	</div>	

	<div id="container_center">
		
	<main>
    <header class="paper_heading">
      <h4>EDIT: "<%= article.title %>"</h4>
    </header>
		
		<article id="full_article">
		    <div class="article_info">
			<p><%= article.category %> - <%= article.scope %></p>
		    </div>	
		  <!-- <img class="art_img" src="%= article.image %>"/> -->
		  <p><%= article.summary %></p>
			<div class="article_stats">
				<p>Submitted by: <%= article.user.username %></p>
				<p><% article.tags.forEach(function(tag){ %>
					<%= article.tags %>	
					<% }); %>
				</p>
			</div>
		</article>

	<div class="form_container large_form">
      <form id="edit_article" action="/articles/<%= article._id %>?_method=PUT" method="post">
  	  <div class="form_design form_column">
        <label for="title">Title *</label>
        <input type="text" id="title" name="title" value="<%= article.title %>"/>
        <label for="image">Link to an Image</label>        
        <input type="text" id="image" name="image" placeholder="supply an image url" value="<%= article.image %>"/>
        <label for="summary">Summary of the News *</label>
        <textarea form="edit_article" id="summary" name="summary" maxlength="500" spellcheck="true"><%= article.summary %></textarea>
        <label for="scope">Scope for the article *</label>
        <select id="scope" name="scope">
		  <option value="local">Local</option>
          <option value="country">Country</option>
          <option value="continent">Continent</option>
          <option value="world">World</option>
      </select>
	<label for="category">Category for the article *</label>
        <select id="category" name="category">
		  <option value="politics">Politics</option>
          <option value="economy">Economy</option>
          <option value="technology">Technology</option>
          <option value="science">Science</option>
          <option value="sports">Sports</option>
          <option value="culture">Culture</option>
          <option value="other">Other</option>
      </select>  
        <label for="tags">Tags for the article</label>
        <input type="text" id="tags" name="tags" placeholder="comma seperated tags"/>
	  </div>	  
      <input class="ok_btn" type="submit" value="UPDATE"/> 
      </form>
    </div>
	</main>
	<div class="spacer"></div>
	<!-- To the #top -->
	<div id="to_top" class="semi_btn"><a class="nav_link top_link" href="#top">Top</a></div>
	</div>
	
	<div id="container_right">
		<div class="width_limiter_right">

		<!-- includes the HOT ratings -->
		<%- include ('../partials/ratings.ejs') %>
		</div>
	</div>	

</div>

<script>
	/*	This code works...
		let e_default = document.getElementById('e_default');
		e_default.selected = false;  **note: not needed **
		
		let options = document.getElementsByTagName('option');
					
	  	for(i=0; i<options.length; i++){
			if (options[i].value === "%= comment.emotion %>"){
	  			options[i].selected = true;
	  		}
		} but, after consulting StackOverflow ! */ 

	let my_scope = document.getElementById('scope');
		my_scope.value = "<%= article.scope %>";
	
	let my_category = document.getElementById('category');
		my_category.value = "<%= article.category %>";
	
	let my_tags = document.getElementById('tags');
		my_tags.value = "<%= article.tags %>";
</script>

<%- include ('../partials/footer.ejs') %>